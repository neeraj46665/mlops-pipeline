schema: '2.0'
stages:
  prepare:
    cmd: python src/prepare.py
    deps:
    - path: data/iris.csv
      hash: md5
      md5: 21d441a28bce4417276097df955afc50
      size: 2928
    - path: src/prepare.py
      hash: md5
      md5: 953d171fe99b6dfe39768026302e2b21
      size: 772
    params:
      params.yaml:
        prepare.data_path: data/iris.csv
        prepare.output_path: data/processed/iris_processed.csv
    outs:
    - path: data/processed/iris_processed.csv
      hash: md5
      md5: 81b864fc2dc82d29a62f43a010105d8b
      size: 2928
  featureize:
    cmd: python src/featureize.py
    deps:
    - path: data/processed/iris_processed.csv
      hash: md5
      md5: 81b864fc2dc82d29a62f43a010105d8b
      size: 2928
    - path: src/featureize.py
      hash: md5
      md5: a3d84beebd90182f1ed40866d220f066
      size: 1220
    params:
      params.yaml:
        featureize.input_path: data/processed/iris_processed.csv
        featureize.output_path: data/featureized/iris_featureized.csv
    outs:
    - path: data/featureized/iris_featureized.csv
      hash: md5
      md5: f464cae0925c551e714a5ebd0cf3c280
      size: 12249
  train:
    cmd: python src/train.py
    deps:
    - path: data/featureized/iris_featureized.csv
      hash: md5
      md5: f464cae0925c551e714a5ebd0cf3c280
      size: 12249
    - path: src/train.py
      hash: md5
      md5: fee76069a71e23148538b2f8d6b3851a
      size: 3004
    params:
      params.yaml:
        train.input_path: data/featureized/iris_featureized.csv
        train.max_depth: 5
        train.model_output: models/iris_model.pkl
        train.n_estimators: 100
        train.random_state: 42
        train.test_size: 0.2
    outs:
    - path: models/iris_model.pkl
      hash: md5
      md5: ee576d39fa0686ae5b04c82974116865
      size: 2657
    - path: run_id.yaml
      hash: md5
      md5: 798f1c16b837fbd226befeb6a903d46f
      size: 42
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: data/featureized/iris_featureized.csv
      hash: md5
      md5: f464cae0925c551e714a5ebd0cf3c280
      size: 12249
    - path: models/iris_model.pkl
      hash: md5
      md5: ee576d39fa0686ae5b04c82974116865
      size: 2657
    - path: src/evaluate.py
      hash: md5
      md5: cf3695cf2ad0e70b81619890fe531ed1
      size: 791
    params:
      params.yaml:
        evaluate.model_path: models/iris_model.pkl
        evaluate.test_data_path: data/featureized/iris_featureized.csv
  register:
    cmd: python src/register_model.py
    deps:
    - path: models/iris_model.pkl
      hash: md5
      md5: ee576d39fa0686ae5b04c82974116865
      size: 2657
    - path: run_id.yaml
      hash: md5
      md5: 798f1c16b837fbd226befeb6a903d46f
      size: 42
    - path: src/register_model.py
      hash: md5
      md5: a8a76694c8ad3fc8894fc62e94e9dc18
      size: 1025
    params:
      params.yaml:
        register.model_name: iris_classification_model
        register.stage: Staging
